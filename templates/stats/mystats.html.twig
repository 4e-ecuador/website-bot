{% extends 'base.html.twig' %}

{% block title %}{{ 'Statistics'|trans }}{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('stats-agent-stats') }}
{% endblock %}

{% block body %}
    <span id="js-agent-id" data-js-agent-id="{{ agent.id }}"></span>
    <h1>{{ 'Statistics'|trans }}</h1>
    {{ 'Agent: {agent_name}'|trans({'agent_name': '<code>' ~ agent.nickname ~'</code>'})|raw }}
    {% if entries %}
        <div>
            {{ 'Latest Update: {last_update}'|trans({'last_update': latest.datetime|date('Y-m-d')}) }}
        </div>
        <h4>AP: {{ latest.ap|number_format }}</h4>

        <h3>{{ 'Medals'|trans }}</h3>

        <table class="table-bordered">
            {% for medalGroup in medalGroups %}
                <tr>
                    {% for name, level in medalGroup %}
                        <td style="width: 100px; text-align: center" title="{{ name ~ ': ' ~ level|medalLevel }}">
                            {% if level %}
                                {{ source('@public_path'~asset('build/images/medals/default-'~level~'.svg')) }}
                            {% endif %}
                            <code>{{ name }}-{{ level }}</code>
                            <br>
                            {{ latest[name]|number_format }}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>

        <div id="container" style="width:100%; height:400px;"></div>

    {% else %}
        <div>There are no statistics for this agent.</div>
        {#        <div>There are no statistics for this agent.Visit <a href="{{ path('stat_import') }}">Import</a></div>#}
    {% endif %}
{% endblock %}
